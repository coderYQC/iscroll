var appDownLoad={browser:{versions:function(){var a=navigator.userAgent;return{trident:-1<a.indexOf("Trident"),presto:-1<a.indexOf("Presto"),webKit:-1<a.indexOf("AppleWebKit"),gecko:-1<a.indexOf("Gecko")&&-1==a.indexOf("KHTML"),mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<a.indexOf("Android")||-1<a.indexOf("Linux"),iPhone:-1<a.indexOf("iPhone"),iPad:-1<a.indexOf("iPad"),webApp:-1==a.indexOf("Safari"),uc:!!a.match(/UCBrowser/)}}(),language:(navigator.browserLanguage||
navigator.language).toLowerCase()},isWeixin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?!0:!1}(),isUpChrome28:function(){var a=/Chrome\/[0-9|.]+/.exec(navigator.userAgent);if(a=a&&a[0]?a[0].replace("Chrome/",""):!1)a=a.split("."),a=28<=a[0]?!0:!1;return a}(),browerPrefix:function(){var a="";["webkit","moz","o","ms"].forEach(function(b){"undefined"!=typeof document[b+"Hidden"]&&(a=b)});return a}(),getStyle:function(a,b){var c=null;a.currentStyle?
c=a.currentStyle[b]:window.getComputedStyle&&(c=window.getComputedStyle(a,null)[b]);return parseInt(c)},addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},removeEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null},downLoad:function(){var a=this.getAttribute("href"),b=appDownLoad.browser.versions.android?this.getAttribute("android"):this.getAttribute("ios"),
c=Date.now(),d=null,e=null;appDownLoad.browser.versions.android&&appDownLoad.isUpChrome28?window.location.href="intent://"+a+"#Intent;scheme="+a+";package=com.dangdang.buy2;end":appDownLoad.browser.versions.iPhone||appDownLoad.browser.versions.iPad?(e=document.createElement("a"),e.setAttribute("href",a),e.style.display="none",document.body.appendChild(e),a=document.createEvent("HTMLEvents"),a.initEvent("click",!1,!1),e.dispatchEvent(a)):(d=document.createElement("iframe"),d.style.height="1px",d.style.width=
"1px",d.style.position="absolute",d.style.top="-999px",d.style.left="-999px",d.src=a,document.body.appendChild(d));a=function(){"hidden"==document[k]&&(clearInterval(f),f=null)};appDownLoad.removeEvent(document,appDownLoad.browerPrefix+"visibilitychange",a);appDownLoad.addEvent(document,appDownLoad.browerPrefix+"visibilitychange",a);var g=0,h=!1,f=null,k=""==appDownLoad.browerPrefix?"visibilityState":appDownLoad.browerPrefix+"VisibilityState",f=setInterval(function(){2E3>Date.now()-c?(c=Date.now(),
g++):2E3<Date.now()-c&&(h=!0,clearInterval(f),f=null,null!==d&&document.body.removeChild(d),null!==e&&document.body.removeChild(e));!h&&10<=g&&(clearInterval(f),f=null,null!==d&&document.body.removeChild(d),null!==e&&document.body.removeChild(e),window.location.href=b)},200)}};
